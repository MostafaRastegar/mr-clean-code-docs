---
paths:
  - "reports/**/*.json"
  - "reports/**/*.md"
  - "reports/**/*.txt"
  - "**/reports/**"
---

# Report Format

This rule defines the standard format for clean code violation reports generated by Cline rules.

## Report Structure

### Required Fields

Every report must include these core fields:

```json
{
  "report": {
    "metadata": {
      "version": "1.0.0",
      "timestamp": "2024-01-01T00:00:00Z",
      "file": "path/to/file.js",
      "totalViolations": 15,
      "severitySummary": {
        "critical": 3,
        "high": 5,
        "medium": 4,
        "low": 3
      }
    },
    "violations": [
      {
        "line": 15,
        "column": 8,
        "severity": "high",
        "category": "naming-conventions",
        "rule": "variable-naming",
        "message": "Variable name 'data' is too generic and doesn't reveal intent",
        "reference": "naming-conventions.md#variables-and-constants",
        "recommendedFix": "Rename 'data' to 'userInformation' or similar descriptive name",
        "code": "const data = 'user information';",

      }
    ]
  }
}
```

## Violation Format

### Core Properties

- **line** (number): Line number where violation occurs
- **column** (number): Column position of violation
- **severity** (string): Criticality level (critical/high/medium/low)
- **category** (string): Violation category (naming-conventions, function-design, etc.)
- **rule** (string): Specific rule violated
- **message** (string): Clear description of the violation
- **reference** (string): Link to rule documentation
- **recommendedFix** (string): Specific fix suggestion
- **code** (string): The actual problematic code

### Severity Levels

#### Critical
- Security vulnerabilities
- Breaking changes
- Major architectural violations
- Performance blockers

#### High
- Poor naming conventions
- Complex functions
- Missing error handling
- Code duplication

#### Medium
- Style inconsistencies
- Minor design issues
- Documentation gaps
- Test coverage issues

#### Low
- Minor formatting issues
- Optional best practices
- Code organization suggestions

## Report Categories

### Naming Conventions
```json
{
  "category": "naming-conventions",
  "rule": "variable-naming",
  "message": "Variable name 'data' is too generic",
  "reference": "naming-conventions.md#variables-and-constants",
  "recommendedFix": "Rename to descriptive name like 'userInformation'"
}
```

### Function Design
```json
{
  "category": "function-design", 
  "rule": "function-length",
  "message": "Function exceeds 20 lines limit",
  "reference": "function-design.md#function-length-and-complexity",
  "recommendedFix": "Break into smaller functions"
}
```

### Class Design
```json
{
  "category": "class-design",
  "rule": "single-responsibility",
  "message": "Class has multiple responsibilities",
  "reference": "class-design.md#single-responsibility-principle",
  "recommendedFix": "Split into separate classes"
}
```

### Error Handling
```json
{
  "category": "error-handling",
  "rule": "error-types",
  "message": "Generic error handling detected",
  "reference": "error-handling.md#error-types-and-classification",
  "recommendedFix": "Use specific error types"
}
```

### Performance
```json
{
  "category": "performance",
  "rule": "rendering-optimization",
  "message": "Inefficient DOM manipulation",
  "reference": "performance.md#rendering-optimization",
  "recommendedFix": "Use document fragment"
}
```

### Security
```json
{
  "category": "security",
  "rule": "input-validation",
  "message": "Missing input validation",
  "reference": "security.md#input-validation",
  "recommendedFix": "Add validation before processing"
}
```

### Testing
```json
{
  "category": "testing",
  "rule": "test-coverage",
  "message": "Function not covered by tests",
  "reference": "testing.md#test-organization",
  "recommendedFix": "Add unit tests"
}
```

### Documentation
```json
{
  "category": "documentation",
  "rule": "code-comments",
  "message": "Missing documentation for public function",
  "reference": "documentation.md#code-comments",
  "recommendedFix": "Add JSDoc comments"
}
```

## Report Output Formats

### JSON Format (Recommended)
```json
{
  "report": {
    "metadata": {
      "version": "1.0.0",
      "timestamp": "2024-01-01T00:00:00Z",
      "file": "src/components/UserList.js",
      "totalViolations": 8,
      "severitySummary": {
        "critical": 0,
        "high": 3,
        "medium": 3,
        "low": 2
      }
    },
    "violations": [
      {
        "line": 15,
        "column": 8,
        "severity": "high",
        "category": "naming-conventions",
        "rule": "variable-naming",
        "message": "Variable name 'data' is too generic",
        "reference": "naming-conventions.md#variables-and-constants",
        "recommendedFix": "Rename 'data' to 'userList'",
        "code": "const data = fetchUsers();",
      }
    ]
  }
}
```

### Markdown Format
```markdown
# Clean Code Report

**File:** `src/components/UserList.js`
**Generated:** 2024-01-01T00:00:00Z
**Total Violations:** 8

## Severity Summary

- üî¥ Critical: 0
- üü† High: 3
- üü° Medium: 3
- üîµ Low: 2

## Violations

### Line 15: Variable Naming (High)
**Rule:** Variable naming conventions
**Message:** Variable name 'data' is too generic and doesn't reveal intent
**Reference:** [naming-conventions.md#variables-and-constants](naming-conventions.md#variables-and-constants)
**Recommended Fix:** Rename 'data' to 'userList'
**Code:** `const data = fetchUsers();`
**Context:**
```javascript
function renderUsers() {
  const data = fetchUsers();  // ‚Üê Line 15
  return data.map(user => user.name);
}
```

### Line 42: Function Length (Medium)
**Rule:** Function length limits
**Message:** Function exceeds 50 lines limit
**Reference:** [function-design.md#function-length-and-complexity](function-design.md#function-length-and-complexity)
**Recommended Fix:** Break into smaller functions
**Code:** `function complexCalculation() { ... }`
```

### Console Output Format
```
üîç Clean Code Report: src/components/UserList.js

üö® CRITICAL (0): None
‚ö†Ô∏è  HIGH (3):
   Line 15: Variable 'data' is too generic ‚Üí Rename to 'userList'
   Line 23: Function too complex ‚Üí Break into smaller functions
   Line 45: Missing error handling ‚Üí Add try-catch block

‚ö†Ô∏è  MEDIUM (3):
   Line 8: Missing JSDoc comments ‚Üí Add documentation
   Line 12: Magic number 42 ‚Üí Use constant MAX_RETRY_ATTEMPTS
   Line 33: Unused variable 'temp' ‚Üí Remove or use variable

‚ÑπÔ∏è  LOW (2):
   Line 5: Inconsistent indentation ‚Üí Use 2 spaces
   Line 19: Long line (120 chars) ‚Üí Break into multiple lines

Total: 8 violations found
```

## Report Generation Guidelines

### When to Generate Reports

1. **Automated Reports**: After code review or CI/CD pipeline
2. **Manual Reports**: On-demand analysis of specific files
3. **Summary Reports**: Weekly/monthly team code quality summaries

### Report Distribution

- **Individual Reports**: Sent to code authors
- **Team Reports**: Shared in team channels
- **Management Reports**: High-level summaries for stakeholders

### Report Retention

- **Individual Reports**: Keep for 3 months
- **Team Reports**: Keep for 6 months
- **Summary Reports**: Keep for 1 year

## Integration Examples

### CI/CD Pipeline Integration
```yaml
# .github/workflows/clean-code-check.yml
- name: Run Clean Code Check
  run: |
    npx cline check src/
    npx cline report --format json --output reports/clean-code-report.json
- name: Upload Report
  uses: actions/upload-artifact@v3
  with:
    name: clean-code-report
    path: reports/clean-code-report.json
```

### Pre-commit Hook Integration
```javascript
// .husky/pre-commit
#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

# Run clean code check
npx cline check --fail-on-violations
if [ $? -ne 0 ]; then
  echo "‚ùå Clean code violations found. Please fix before committing."
  exit 1
fi
```

### VS Code Integration
```json
// .vscode/settings.json
{
  "cline.rules": {
    "enabled": true,
    "reportFormat": "markdown",
    "outputPath": "./reports"
  }
}
```

## Code Review Checklist

- [ ] Report includes all required metadata fields
- [ ] Violations are categorized correctly
- [ ] Severity levels are appropriate
- [ ] Messages are clear and actionable
- [ ] References point to correct documentation
- [ ] Recommended fixes are specific and helpful
- [ ] Code snippets show exact problem location
- [ ] Report follows chosen output format consistently
- [ ] Report is accessible to intended audience